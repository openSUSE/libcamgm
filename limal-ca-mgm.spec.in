@HEADER-COMMENT@

@HEADER@
BuildRequires: curl gcc-c++ limal-devel limal-perl limal-devtools perl-gettext sgml-skel

%if 0%{?suse_version} >= 1030
BuildRequires: libopenssl-devel openssl
Requires: openssl
%else
BuildRequires: openssl-devel
%endif

%if 0%{?fedora_version}
BuildRequires: openssl-perl
Requires: openssl-perl
%endif
%if 0%{?fedora_version} >= 7
BuildRequires: perl-ExtUtils-Embed
%endif

Summary:	LiMaL--CA Management Library

%description
The LiMaL CA Management Library provides methods for managing a certificate authority.

@HEADER-DEVEL-1@
Requires:       openssl-devel
Summary:	LiMaL - CA Management Library Development Files
%if 0%{?suse_version} >= 1030
Requires: libopenssl-devel
%endif

%description devel
The LiMaL CA Management Library provides methods for managing 
a Certificate Authority. This package includes the header files and 
development documentation.

@HEADER-PERL@
Summary:	LiMaL - CA Management Library Perl Bindings 

%description perl
The LiMaL CA Management Library provides methods for managing 
a Certificate Authority. 

This package provides the perl bindings to the CA Management Library.


@PREP@

@BUILD@

@INSTALL@
mkdir -p $RPM_BUILD_ROOT/var/lib/
install -d -m 0700 $RPM_BUILD_ROOT/var/lib/CAM
install -d -m 0755 $RPM_BUILD_ROOT/var/lib/CAM/.cas/
install -m 0644 %{_builddir}/%{name}-%{version}/src/openssl.cnf.tmpl $RPM_BUILD_ROOT/var/lib/CAM/
@INSTALL-PO@

@POST@

@POSTUN@

@CLEAN@

%files -f %name.lang
%defattr(-,root,root)
%dir @limallibdir@
%attr(0700,root,root) %dir /var/lib/CAM
%attr(0755,root,root) %dir /var/lib/CAM/.cas
%config /var/lib/CAM/openssl.cnf.tmpl
@limallibdir@/lib*.so.*

%files devel
%defattr(-,root,root)
%dir @limallibdir@
@limallibdir@/lib*.so
@limallibdir@/lib*.la
%dir @limalincludedir@/@RPMLIB@
@limalincludedir@/@RPMLIB@/*
@pkgconfigdir@/@RPMNAME@.pc
%doc @docdir@

%files perl
%defattr(-,root,root)
%dir %{perl_vendorarch}/LIMAL
%dir %{perl_vendorarch}/auto/LIMAL
%dir %{perl_vendorarch}/auto/LIMAL/CaMgm/
%{perl_vendorarch}/auto/LIMAL/CaMgm/*
%{perl_vendorarch}/LIMAL/*.pm
